/*

 Copyright (C) 2009-2012. David Thevenin, ViniSketch SARL (c), and 
 contributors. All rights reserved

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU Lesser General Public License as published
 by the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU Lesser General Public License for more details.

 You should have received a copy of the GNU Lesser General Public License
 along with this program. If not, see <http://www.gnu.org/licenses/>.
*/
(function(e,k){function y(a,b){for(var c in b)getter=b.__lookupGetter__(c),setter=b.__lookupSetter__(c),getter&&a.__defineGetter__(c,getter),setter&&a.__defineSetter__(c,setter),!getter&&!setter&&(a[c]=b[c]);return a}function z(a,b){for(var c in b){var d=Object.getOwnPropertyDescriptor(b,c);d&&(d.get||d.set)?i.defineProperty(a,c,d):a[c]=b[c]}return a}function A(a,b,c){if(Object.prototype.hasOwnProperty.call(c,"set")){var d=c.set;n(d)&&a.__defineSetter__(b,d)}Object.prototype.hasOwnProperty.call(c,
"get")&&(d=c.get,n(d)&&a.__defineGetter__(b,d))}function B(a,b,c){function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}if("object"!=typeof c||null===c)throw new TypeError("bad desc");if("string"!=typeof b||null===b)throw new TypeError("bad property name");var f={};f.enumerable=d(c,"enumerable")?!!c.enumerable:!0;f.configurable=d(c,"configurable")?!!c.configurable:!0;d(c,"value")&&(f.value=c.value);d(c,"writable")&&(f.writable=!!c.writable);if(d(c,"get")){var e=c.get;n(e)&&(f.get=e)}d(c,
"set")&&(c=c.set,n(c)&&(f.set=c));if(("get"in f||"set"in f)&&("value"in f||"writable"in f))throw new TypeError("identity-confused descriptor");Object.defineProperty(a,b,f)}function C(a,b,c){if(c){a._properties_||(a._properties_=[]);if(!a.prototype)throw"defineClassProperty on a Class without prototype";i.defineProperty(a.prototype,b,c);!1!=c.enumerable&&a._properties_.push(b)}}function s(a){var b;switch(a){case null:return null;case k:return k}switch(p.call(a)){case OBJECT_CLASS:case OBJECT_TYPE:b=
{};for(var c in a)b[c]=s(a[c]);return b;case ARRAY_CLASS:b=[];for(c=0;c<a.length;c++)b[c]=s(a[c]);return b;default:return a}}function l(a){return!!(a&&1===a.nodeType)}function D(a){return"function"==typeof Array.isArray?Array.isArray(a):p.call(a)===ARRAY_CLASS}function n(a){return"function"===typeof a}function m(a){return p.call(a)===STRING_CLASS}function t(a){return"undefined"===typeof a}function u(a,b){if(a){var c=a.className;return c&&0<c.length&&(c===b||RegExp("(^|\\s)"+b+"(\\s|$)").test(c))}}
function E(){var a=arguments[0],b,c=1;if(a){for(;c<arguments.length;c++)b=arguments[c],u(a,b)||(a.className=(a.className?a.className+" ":"")+b);return a}}function F(){var a=arguments[0],b,c=1;if(a&&a.className){for(;c<arguments.length;c++)b=arguments[c],a.className=G(a.className.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)")," "));return a}}function G(a){return!m(a)?"":a.replace(/^\s+/,"").replace(/\s+$/,"")}function H(a){if(!m(a))return"";var b=a.split("-"),c=b.length;if(1===c)return b[0];for(var a="-"===
a.charAt(0)?b[0].charAt(0).toUpperCase()+b[0].substring(1):b[0],d=1;d<c;d++)a+=b[d].charAt(0).toUpperCase()+b[d].substring(1);return a}function v(a){if(!l(a))return{};var b=w(a,"display"),c=a.style,d=c.visibility,f=c.position,e=c.display,g=0,h=0;if("none"!==b&&null!==b)return{width:a.offsetWidth,height:a.offsetHeight};c.visibility="hidden";c.position="absolute";c.display="block";g=a.clientWidth;h=a.clientHeight;c.display=e;c.position=f;c.visibility=d;return{width:g,height:h}}function w(a,b){if(l(a)){var b=
"float"===b?"cssFloat":H(b),c=a.style[b];if(!c||"auto"===c)c=(c=j.defaultView.getComputedStyle(a,null))?c[b]:null;return"opacity"===b?c?parseFloat(c):1:"auto"===c?null:c}}function I(a,b){if(l(a)){var c=a.style;t(b)&&c.removeProperty("opacity");c.opacity=1===b||""===b?"":1.0E-5>b?0:b}}function J(a){if(!a)return null;if(a.getBoundingClientRect){var b=a.getBoundingClientRect();if(b)return{x:b.left,y:b.top}}for(var c=b=0,d=a;d;){var f=0,e=0;d!=a&&(f=parseInt(d.currentStyle?d.currentStyle.borderLeftWidth:
0,0),e=parseInt(d.currentStyle?d.currentStyle.borderTopWidth:0,0),f=isNaN(f)?0:f,e=isNaN(e)?0:e);b+=d.offsetLeft-d.scrollLeft+f;c+=d.offsetTop-d.scrollTop+e;d=d.offsetParent}return{x:b,y:c}}function M(a){var b=J(a);return{width:a.offsetWidth,height:a.offsetWidth,left:b.x,top:b.y}}function N(a){return a&&a.getBoundingClientRect?a.getBoundingClientRect():null}function K(a){if(a)for(;a.firstChild;)a.removeChild(a.firstChild)}function O(a,b){a&&a.style?a.style.webkitTransform=b:console.warn("setElementTransform, elem null or without style")}
function P(a){if(a)return e.getComputedStyle(a).webkitTransform}function Q(a,b){a&&a.style?a.style.msTransform=b:console.warn("setElementTransform, elem null or without style")}function R(a){if(a)return e.getComputedStyle(a).msTransform}function S(a,b){a&&a.style?a.style.MozTransform=b:console.warn("setElementTransform, elem null or without style")}function T(a){if(a)return e.getComputedStyle(a).MozTransform}var j=e.document;e.vs={};e.vs.util={};e.vs.core={};e.vs.data={};e.vs.ui={};e.vs.fx={};e.vs.av=
{};e.vs.ext={};e.vs.ext.ui={};e.vs.ext.fx={};e.vs.SUPPORT_3D_TRANSFORM=!1;var j="undefined"!=typeof e?e.document:null,g=e.vs,i=g.util,o=j?j.createElement("vstestelem"):null,h=o?o.style:null,x=/\/Date\((-?\d+)\)\//;g.SUPPORT_CSS_TRANSFORM=h&&(h.webkitTransform||h.msTransform);h&&(h.webkitTransform!==k?g.SUPPORT_3D_TRANSFORM="WebKitCSSMatrix"in e&&"m11"in new WebKitCSSMatrix:h.MozTransform!==k&&(g.SUPPORT_3D_TRANSFORM="MozPerspective"in h));g.util.extend=Object.defineProperty?z:y;var U="function"===
typeof Object.keys?Object.keys:function(a){var b=[],c;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b};NULL_TYPE="Null";UNDEFINED_TYPE="Undefined";BOOLEAN_TYPE="Boolean";NUMBER_TYPE="Number";STRING_TYPE="String";OBJECT_TYPE="Object";BOOLEAN_CLASS="[object Boolean]";NUMBER_CLASS="[object Number]";STRING_CLASS="[object String]";ARRAY_CLASS="[object Array]";OBJECT_CLASS="[object Object]";var p=Object.prototype.toString,q,r;h&&h.webkitTransform!==k?(q=O,r=P):h&&h.msTransform!==
k?(q=Q,r=R):h&&h.MozTransform!==k&&(q=S,r=T);Array.prototype._remove=function(a,b){var c=this.slice((b||a)+1||this.length);this.length=0>a?this.length+a:a;return this.push.apply(this,c)};var L=function(a,b){for(var c=this.length,b=b?b:0,b=0>b?0:b;b<c;){if(this[b]===a)return b;b++}return-1};Array.prototype.findItem=Array.prototype.indexOf?Array.prototype.indexOf:L;Array.prototype.remove=function(a,b){if("object"===typeof a||i.isString(a))for(var c=0;c<this.length;)this[c]===a?this._remove(c):c++;else this._remove(a,
b);return this};Array.prototype.removeAll=function(){for(;0<this.length;)this._remove(0);return this};Array.prototype.clone=function(){return this.slice()};g._current_platform_id=0;i.extend(i,{vsTestElem:o,vsTestStyle:h,extendClass:function(a,b){if(a&&b&&a.prototype&&b.prototype)try{if(Object.__proto__)a.prototype.__proto__=b.prototype;else{var c=a.prototype;a.prototype=new b;i.extend(a.prototype,c)}a._properties_||(a._properties_=[]);b._properties_&&(a._properties_=a._properties_.concat(b._properties_));
return a}catch(d){console.error(d.message())}},defineProperty:Object.defineProperty?B:A,defineClassProperty:C,defineClassProperties:function(a,b){if(!a.prototype)throw"defineClassProperties on a Class without prototype";for(var b=Object(b),c=U(b),d=0;d<c.length;d++)C(a,c[d],b[c[d]])},clone:s,free:function(a){a&&(a._free&&a._free(),a.destructor&&a.destructor(),delete a)},toJSON:function(a){return JSON.stringify(a)},isElement:l,isArray:D,isFunction:n,isString:m,isNumber:function(a){return p.call(a)===
NUMBER_CLASS},isUndefined:t,hasClassName:u,addClassName:E,removeClassName:F,toggleClassName:function(a,b){return!a?void 0:u(a,b)?F(a,b):E(a,b)},htmlEncode:function(a){return!m(a)?"":a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},strip:G,camelize:H,capitalize:function(a){return!m(a)?"":a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()},underscore:function(a){return!m(a)?"":a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/-/g,
"_").toLowerCase()},parseJSON:function(a){function b(a){if(m(a)){var c=x.exec(a);c&&c[1]&&(a=new Date(parseInt(c[1])))}else if(D(a))for(c=0;c<a.length;c++)a[c]=b(a[c]);else if(!(a instanceof Date)&&a instanceof Object)for(c in a)a[c]=b(a[c]);return a}if(!a)return null;var c=JSON.parse(a);return!x.test(a)?c:b(c)},getElementHeight:function(a){return!l(a)?void 0:v(a).height},getElementWidth:function(a){return!l(a)?void 0:v(a).width},getElementDimensions:v,getElementStyle:w,setElementStyle:function(a,
b){if(l(a)){var c=a.style,d;for(d in b)"opacity"===d?I(a,b[d]):(b[d]||c.removeProperty(d),c["float"===d||"cssFloat"===d?t(c.styleFloat)?"cssFloat":"styleFloat":d]=b[d])}},setElementOpacity:I,getElementOpacity:function(a){return!l(a)?void 0:w(a,"opacity")},getElementAbsolutePosition:J,setElementPos:function(a,b,c){a&&(a=a.style,a.left=b+"px",a.top=c+"px")},setElementSize:function(a,b,c){a&&(a=a.style,a.width=b+"px",a.height=c+"px")},setElementVisibility:function(a,b){if(a){var c=a.style;c||i.isString(a.innerHTML)?
c.visibility=b?"visible":"hidden":b?a.setAttribute("visibility","visible"):a.setAttribute("visibility","hidden")}},isElementVisible:function(a){if(!a)return!1;var b=a.style;return b||i.isString(a.innerHTML)?"hidden"===b.visibility?!1:!0:a instanceof CharacterData?!0:"hidden"===a.getAttribute("visibility")?!1:!0},removeAllElementChild:K,setElementInnerText:function(a,b){if(a){K(a);i.isString(b)||(b=b===k?"":null===b?"":i.isNumber(b)?""+b:b.toString?b.toString():"");var c=b.split("\n"),d=0;if(c.length){a.appendChild(j.createTextNode(c[d]));
for(d++;d<c.length;d++)a.appendChild(j.createElement("br")),a.appendChild(j.createTextNode(c[d]))}}},setElementTransform:q,getElementTransform:r,getBoundingClientRect:o&&o.getBoundingClientRect?N:M,importFile:function(a,b,c,d){b||(b=j);var f;if("js"===d||0<=a.search("\\.js"))d=b.createElement("script"),d.setAttribute("type","text/javascript"),d.setAttribute("src",a),c&&(d.onload=function(){c.call(this,a)}),b.head||(b.head=b.querySelector("head")),b.head.appendChild(d);else if("css"===d||0<=a.search("\\.css")){f=
b.createElement("link");f.setAttribute("rel","stylesheet");f.setAttribute("type","text/css");f.setAttribute("href",a);f.setAttribute("media","screen");if(i.isFunction(c)){var e=0;(function(){!f.sheet||!f.sheet.cssRules?100>e++?cssTimeout=setTimeout(arguments.callee,100):console.error("CSS load of "+a+" failed!"):f.sheet.cssRules&&0===f.sheet.cssRules.length?console.error("CSS load of "+a+" failed!"):c.call(j,a)})()}b.head||(b.head=b.querySelector("head"));b.head.appendChild(f)}},setActiveStyleSheet:function(a){var b=
0,c=j.getElementsByTagName("link"),d,f;g._current_platform_id=a;var e=g.Application_applications;if(e)for(f in e)b=e[f],b.view&&(b.view.style.display="none");for(b=0;b<c.length;b++)d=c[b],d.getAttribute("title")&&(d.getAttribute("title")!==a?d.setAttribute("disabled",!0):d.removeAttribute("disabled"));if(e)for(f in e)b=e[f],b.view&&(b.view.style.display="block")},preloadTemplate:function(a){var b=a+".xhtml",c;if(!g.ui||!g.ui.View||!g.ui.View.__comp_templates[b])c=new XMLHttpRequest,c.open("GET",b,
!1),c.send(null),4===c.readyState?200===c.status||0===c.status?(data=c.responseText,g.ui&&g.ui.View&&(g.ui.View.__comp_templates[b]=data)):console.error("Template file for component '"+a+"' unfound"):console.error("Pb when load the component '"+a+"' template")},__date_reg_exp:x,_findItem:L,_defineProperty_api1:A,_defineProperty_api2:B,_extend_api1:y,_extend_api2:z})})(window);
